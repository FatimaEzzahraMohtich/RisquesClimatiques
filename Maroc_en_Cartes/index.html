<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Risques Climatiques Au Maroc et Au Nord d'Afrique</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

  <link rel="stylesheet" href="leaflet.css" />
	<script src="leaflet.js"></script>

  <!-- Map Style-->
	<style>
		#map {
      position: absolute;
			width: 100%;
			top: 70px;
      bottom: 0;
			background-color: #222;
		}
		.info {
		    padding: 20px 20px;
		    font: 14px/16px Arial, Helvetica, sans-serif;
		    background: #000;
		    background: rgba(4,4,4,0.8);
		    box-shadow: 0 0 15px rgba(0,0,0,0.2);
		    border-radius: 5px;
				position: fixed;
				right: 0px;
				bottom: 40px;
		}
		.info h4 {
		    margin: 0 0 5px;
		    color: #e5e5e5;
		}
	</style>
<style>
		#map {
			width: 100%;
			height: 750px;
		}
		.infoZD {
		    padding: 6px 8px;
		    font: 14px/16px Arial, Helvetica, sans-serif;
		    background: white;
		    background: rgba(255,255,255,0.9);
		    box-shadow: 0 0 15px rgba(0,0,0,0.5);
		    border-radius: 5px;
		}
		.infoZD h6 {
		    margin: 0 0 5px;
		    color: #000;
		}
		.infoSH {
		    padding: 6px 8px;
		    font: 14px/16px Arial, Helvetica, sans-serif;
		    background: white;
		    background: rgba(255,255,255,0.9);
		    box-shadow: 0 0 15px rgba(0,0,0,0.5);
		    border-radius: 5px;
		}
		.infoSH h6 {
		    margin: 0 0 5px;
		    color: #000;
		}
		.infoRS {
		    padding: 6px 8px;
		    font: 14px/16px Arial, Helvetica, sans-serif;
		    background: white;
		    background: rgba(255,255,255,0.9);
		    box-shadow: 0 0 15px rgba(0,0,0,0.5);
		    border-radius: 5px;
		}
		.infoRS h6 {
		    margin: 0 0 5px;
		    color: #000;
		}
		.infoRI {
		    padding: 6px 8px;
		    font: 14px/16px Arial, Helvetica, sans-serif;
		    background: white;
		    background: rgba(255,255,255,0.9);
		    box-shadow: 0 0 15px rgba(0,0,0,0.5);
		    border-radius: 5px;
		}
		.infoRI h6 {
		    margin: 0 0 5px;
		    color: #000;
		}
        .infoP {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            border-radius: 5px;
        }
        .infoP h6 {
            margin: 0 0 5px;
            color: #000;
        }
        .infoCO {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            border-radius: 5px;
        }
        .infoCO h6 {
            margin: 0 0 5px;
            color: #000;
        }
		.legendZD {
            line-height: 18px;
            color: #000;
        }
    
        .legendZD i {
         	width: 18px;
        	height: 18px;
        	float: left;
        	margin-right: 8px;
        	opacity: 0.7;
        }
        .legendSH {
            line-height: 18px;
            color: #000;
        }
    
        .legendSH i {
         	width: 18px;
        	height: 18px;
        	float: left;
        	margin-right: 8px;
        	opacity: 0.7;
        }
        .legendRS {
            line-height: 18px;
            color: #000;
        }
    
        .legendRS i {
         	width: 18px;
        	height: 18px;
        	float: left;
        	margin-right: 8px;
        	opacity: 0.7;
        }
        .legendRI {
            line-height: 18px;
            color: #000;
        }
    
        .legendRI i {
         	width: 18px;
        	height: 18px;
        	float: left;
        	margin-right: 8px;
        	opacity: 0.7;
        }
        .legendP {
            line-height: 18px;
            color: #000;
        }
    
        .legendP i {
            width: 18px;
            height: 18px;
            float: left;
            margin-right: 8px;
            opacity: 0.7;
        }
	</style>	
</head>
<body>
<!-- partial:index.partial.html -->
<div class="overlay-navigation">
  <nav role="navigation">
    <ul>
      <li><a href="../index.html" data-content="The beginning">Home</a></li>
      <li><a href="../Maroc_en_Cartes/index.html" data-content="Curious?">Maroc<br>en Cartes</a></li>
      <li><a href="../Maroc_en_3D/index.html" data-content="I got game">Maroc<br>en 3D</a></li>
      <li><a href="../NA_en_Cartes/index.html" data-content="Curious?">NA en Cartes</a></li>
      <li><a href="../NA_en_Cartes_Dynam/index.html" data-content="Curious?">NA en Cartes<br>Dynamiques</a></li>
      <li><a href="../NA_en_Graphes/index.html" data-content="I got game">NA en Graphes</a></li>
      <li><a href="../A_Propos/index.html" data-content="Only the finest">NA en Graphes</a></li>
      <li><a href="../Contact/index.html" data-content="Don't hesitate">Contact</a></li>
    </ul>
  </nav>
</div>

<section class="home">
  <!-- add text or link in the menu bar
  <a href="https://codepen.io/fluxus/pen/gPWvZm" target="_blank">Click for a slightly nicer Velocity.js version</a>
  -->
  <div class="open-overlay">
    <span class="bar-top"></span>
    <span class="bar-middle"></span>
    <span class="bar-bottom"></span>
  </div>
</section>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script  src="./script.js"></script>

  <!-- Code for the map -->
  <!-- HTML -->
  <div id='map'>
    <div class="app-content">
      <h1>
        Carte des risques climatiques au Maroc
      </h1>
    </div>
  </div>

  <!-- GeoJson -->
  <script src="ZonesDesert.geojson" type="text/javascript"></script>
  <script src="RisquesClimatiquesMaroc.geojson" type="text/javascript"></script>
  <script src="CentroideRegion.geojson" type="text/javascript"></script>
  <!-- JavaScript -->
  <!-- We can add this script to a separate file and inculde src link -->
  <script type="text/javascript">

   var map = L.map('map').setView([28.912030, -9.604092], 5);
     L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution : '©MOHTICH Fatima-Ezzahra @Salimi Mahassine'}).addTo(map);
	
	// get color depending on indice de desertification
	function getColorZD(t) {
		return t == "1" ? '#005824' :
		       t == "2" ? '#238b45' :
		       t == "3" ? '#41ae76' :
		       t == "4" ? '#66c2a4' :
		       t == "5" ? '#99d8c9' :
		       t == "6" ? '#ccece6' :
		       t == "7" ? '#e5f5f9' :
               t == "8" ? '#f7fcfd' :
		                            '#ffffff';
	}
	function MonstyleZD(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'black',
			dashArray: '3',
			fillOpacity: 0.9,
			fillColor: getColorZD(feature.properties.ind_desert)
		};
	}
    // get color depending on indice de stresse hydrique
	function getColorSH(c) {
		return c > 4 ? '#ffffcc' :
		       c > 3 ? '#a1dab4' :
		       c > 2 ? '#41b6c4' :
		       c > 1 ? '#2c7fb8' :
                                     '#ffffff';
	}

	function MonstyleSH(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'black',
			dashArray: '3',
			fillOpacity: 0.9,
			fillColor: getColorSH(feature.properties.ind_stresshyd)
		};
	}
	 // get color depending on indice de secheresse
	function getColorRS(c) {
		return c > 0.80 ? '#a63603' :
		       c > 0.60 ? '#e6550d' :
		       c > 0.40 ? '#fd8d3c' :
		       c > 0.20 ? '#fdbe85' :
                                     '#ffffff';
	}

	function MonstyleRS(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'yellow',
			dashArray: '3',
			fillOpacity: 0.9,
			fillColor: getColorRS(feature.properties.ind_seche)
		};
	}
	 // get color depending on indice d'inondation
	function getColorRI(c) {
		return c > 4 ? '#045a8d' :
		       c > 3 ? '#2b8cbe' :
		       c > 2 ? '#74a9cf' :
		       c > 1 ? '#bdc9e1' :
                                     '#ffffff';
	}

	function MonstyleRI(feature) {
		return {
			weight: 2,
			opacity: 1,
			color: 'black',
			dashArray: '3',
			fillOpacity: 0.9,
			fillColor: getColorRI(feature.properties.ind_inond)
		};
	}
    // get color depending on pluviometrie
    function getColorP(c) {
        return c > 600 ? '#045a8d' :
               c > 400 ? '#74a9cf' :
               c > 250 ? '#bdc9e1' :
               c > 100 ? '#f1eef6' :
                                     '#ffffff';
    }

    function MonstyleP(feature) {
        return {
            weight: 2,
            opacity: 1,
            color: 'black',
            dashArray: '3',
            fillOpacity: 0.9,
            fillColor: getColorP(feature.properties.Pluvio)
        };
    }
     // carte à symboles proportionnelles de l'emission de CO2
    var sym = L.geoJson(CentroideRegion, {

        style: MonstyleSymbCO,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.CO2))
            });
        },
    });
    
    function MonstyleRegCO(feature) {
        return {
            weight: 2,
            opacity: 1,
            color: 'lightblue',
            dashArray: '3',
            fillOpacity: 0.2,
        };
    }
    function MonstyleSymbCO(feature) {
        return {
            weight: 2,
            opacity: 1,
            color: 'black',
            dashArray: '3',
            fillOpacity: 1,
        };
    }
    function calcRadius(val) {
        var radius = Math.sqrt((val*5/686) / Math.PI);
            return radius;
    }


	function highlightFeatureZD(e) {
	    var layerZD = e.target;

	    layerZD.setStyle({
	        weight: 5,
	        color: '#666',
	        dashArray: '',
	        fillOpacity: 0.9
	    });

	    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
	        layerZD.bringToFront();
	    }
	        infoZD.update(layerZD.feature.properties);

	}
    function highlightFeatureSH(e) {
	    var layerSH = e.target;

	    layerSH.setStyle({
	        weight: 5,
	        color: '#666',
	        dashArray: '',
	        fillOpacity: 0.9
	    });

	    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
	        layerSH.bringToFront();
	    }
	        infoSH.update(layerSH.feature.properties);

	}
	 function highlightFeatureRS(e) {
	    var layerRS = e.target;

	    layerRS.setStyle({
	        weight: 5,
	        color: '#666',
	        dashArray: '',
	        fillOpacity: 0.9
	    });

	    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
	        layerRS.bringToFront();
	    }
	        infoRS.update(layerRS.feature.properties);

	}
	function highlightFeatureRI(e) {
	    var layerRI = e.target;

	    layerRI.setStyle({
	        weight: 5,
	        color: '#666',
	        dashArray: '',
	        fillOpacity: 0.9
	    });

	    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
	        layerRI.bringToFront();
	    }
	        infoRI.update(layerRI.feature.properties);

	}
    function highlightFeatureP(e) {
        var layerP = e.target;

        layerP.setStyle({
            weight: 5,
            color: '#666',
            dashArray: '',
            fillOpacity: 0.9
        });

        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
            layerP.bringToFront();
        }
            infoP.update(layerP.feature.properties);

    }
    function highlightFeatureCO(e) {
        var layerCO = e.target;

        layerCO.setStyle({
            weight: 5,
            color: '#666',
            dashArray: '',
            fillOpacity: 0.9
        });
    }


	function resetHighlightZD(e) {
    	geojsonZD.resetStyle(e.target);
    	    infoZD.update();

	}
    function resetHighlightSH(e) {
    	geojsonSH.resetStyle(e.target);
    	    infoSH.update();

	}
	function resetHighlightRS(e) {
    	geojsonRS.resetStyle(e.target);
    	    infoRS.update();

	}
	function resetHighlightRI(e) {
    	geojsonRI.resetStyle(e.target);
    	    infoRI.update();
	}
    function resetHighlightP(e) {
        geojsonP.resetStyle(e.target);
            infoP.update();
    }
    function resetHighlightCO(e) {
        geojsonCO.resetStyle(e.target);
            infoCO.update();
    }

	function zoomToFeatureZD(e) {
    map.fitBounds(e.target.getBounds());
}
	function zoomToFeatureSH(e) {
    map.fitBounds(e.target.getBounds());
}
    function zoomToFeatureRS(e) {
    map.fitBounds(e.target.getBounds());
}
    function zoomToFeatureRI(e) {
    map.fitBounds(e.target.getBounds());
}
function zoomToFeatureP(e) {
    map.fitBounds(e.target.getBounds());
}
    function zoomToFeatureCO(e) {
    map.fitBounds(e.target.getBounds());
}

	function onEachFeatureZD(feature, layerZD) {
    layerZD.on({
        mouseover: highlightFeatureZD,
        mouseout: resetHighlightZD,
        click: zoomToFeatureZD
    });
  }  
    function onEachFeatureSH(feature,layerSH) {
    layerSH.on({
        mouseover: highlightFeatureSH,
        mouseout: resetHighlightSH,
        click: zoomToFeatureSH
    });
}
    function onEachFeatureRS(feature,layerRS) {
    layerRS.on({
        mouseover: highlightFeatureRS,
        mouseout: resetHighlightRS,
        click: zoomToFeatureRS
    });
}
    function onEachFeatureRI(feature,layerRI) {
    layerRI.on({
        mouseover: highlightFeatureRI,
        mouseout: resetHighlightRI,
        click: zoomToFeatureRI
    });
}
function onEachFeatureP(feature,layerP) {
    layerP.on({
        mouseover: highlightFeatureP,
        mouseout: resetHighlightP,
        click: zoomToFeatureP
    });
}
    function onEachFeatureCO(feature,layerCO) {
    layerCO.on({
        mouseover: highlightFeatureCO,
        mouseout: resetHighlightCO,
        click: zoomToFeatureCO
    });
}

var infoZD = L.control();
var infoSH = L.control();
var infoRS = L.control();
var infoRI = L.control();
var infoP = L.control();
var infoCO = L.control();

infoZD.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoZD'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoSH.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoSH'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoRS.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoRS'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoRI.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoRI'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoP.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoP'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoCO.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoCO'); // create a div with a class "info"
    this.update();
    return this._div;
};

// method that we will use to update the control based on feature properties passed
infoZD.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation des zones à risques de desertification :</h4>' +  (props ?
        'Zone : <b>' + props.ind_desert + '</b> <br />Province ou Prefecture : ' + props.prov + '</b> <br />Region Biogeographique : '+ props.RegionBiogeo +  '</b> <br />Occupation : '+ props.Occupation  + '</b> <br />Bioclimat : '+ props.Bioclimat +'</b> <br />Facteur Discriminant : '+ props.Facteurdiscriminant + '</sup>'
        : ' Merci de mettre le curseur sur une province.');
};

infoSH.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation du niveau du stress hydrique au Maroc </h4>' +  (props ?
    	'Region : <b>' + props.region + '</b> <br />Indice de Stress Hydrique : '+ props.ind_stresshyd + '  ' + props.stresshyd+ '</sup>'
        : ' Merci de mettre le curseur sur une région.');
};

infoRS.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation du risque de secheresse au Maroc </h4>' +  (props ?
    	'Region : <b>' + props.region + '</b> <br />Indice de secheresse : '+ props.ind_seche + '  ' + props.seche+ '</sup>'
        : ' Merci de mettre le curseur sur une région.');
};
infoRI.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation du risque d inondation au Maroc </h4>' +  (props ?
    	'Region : <b>' + props.region + '</b> <br />Indice d innodation : '+ props.ind_inond + '  ' + props.inond+ '</sup>'
        : ' Merci de mettre le curseur sur une région.');
};
infoP.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation de la pluviometrie au Maroc </h4>' +  (props ?
        'Region : <b>' + props.region + '</b> <br />Moyenne des precipitations : '+ props.Pluvio + '  ' + '</sup>'
        : ' Merci de mettre le curseur sur une région.');
};
infoCO.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation de l emission du CO2 au Maroc </h4>' +  (props ?
        'Region : <b>' + props.region + '</b> <br />Emission du CO2: '+ props.CO2 + '  ' + '</sup>'
        : ' Merci de mettre le curseur sur une région.');
};

map.on('overlayadd', function (eventLayer) {
    if (eventLayer.name === 'Sensibilite a la desertification') {
        this.removeControl(infoSH);
        this.removeControl(infoRS);
        this.removeControl(infoRI);
        this.removeControl(infoP);
        this.removeControl(infoCO);
        infoZD.addTo(this);
    } else if (eventLayer.name === 'Stress Hydrique au Maroc'){
        this.removeControl(infoZD);
        this.removeControl(infoRS);
        this.removeControl(infoRI);
        this.removeControl(infoP);
        this.removeControl(infoCO);
        infoSH.addTo(this);
    } else if (eventLayer.name === 'Risque de secheresse au Maroc'){
        this.removeControl(infoZD);
        this.removeControl(infoSH);
        this.removeControl(infoRI);
        this.removeControl(infoP);
        this.removeControl(infoCO);
        infoRS.addTo(this);
    } else if (eventLayer.name === 'Risque d inondation au Maroc'){
        this.removeControl(infoZD);
        this.removeControl(infoSH);
        this.removeControl(infoRS);
        this.removeControl(infoP);
        this.removeControl(infoCO);
        infoRI.addTo(this);
    } else if (eventLayer.name === 'Pluviometrie'){
        this.removeControl(infoZD);
        this.removeControl(infoSH);
        this.removeControl(infoRS);
        this.removeControl(infoRI);
        this.removeControl(infoCO);
        infoP.addTo(this);
    }else  {
        this.removeControl(infoZD);
        this.removeControl(infoSH);
        this.removeControl(infoRS);
        this.removeControl(infoP);
        this.removeControl(infoRI);
        infoCO.addTo(this); 
    }});

// DECLARATION DES LAYERS */
	var geojsonZD = L.geoJson(ZonesDesert, {
		style: MonstyleZD,
	    onEachFeature: onEachFeatureZD,
});

	var geojsonSH = L.geoJson(RisquesClimatiquesMaroc, {
		style: MonstyleSH,
	    onEachFeature: onEachFeatureSH,
});
    var geojsonRS = L.geoJson(RisquesClimatiquesMaroc, {
		style: MonstyleRS,
	    onEachFeature: onEachFeatureRS,
});
    var geojsonRI = L.geoJson(RisquesClimatiquesMaroc, {
		style: MonstyleRI,
	    onEachFeature: onEachFeatureRI,
});
    var geojsonP = L.geoJson(RisquesClimatiquesMaroc, {
        style: MonstyleP,
        onEachFeature: onEachFeatureP,
});
    var geojsonCO = L.geoJson(RisquesClimatiquesMaroc, {
        style: MonstyleRegCO,
        onEachFeature: onEachFeatureCO,
});
    // carte à symboles proportionnelles de l'emission de CO2
    var sym = L.geoJson(CentroideRegion, {

        style: MonstyleSymbCO,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.CO2))
            });
        },
    });
    var geojsonEmissionC02 = L.layerGroup([geojsonCO,sym.bringToFront()]);

var graphicScale = L.control.graphicScale({fill:'fill',doubleLine:true}).addTo(map);

var basemaps = {
    Esri_WorldGrayCanvas: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
    maxZoom: 16
    }),

    OpenStreetMapDE:L.tileLayer.wms('https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {
	maxZoom: 18,
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}),
    EsriWorldImagery: L.tileLayer.wms('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
}),

    TOPO_WMS: L.tileLayer.wms('http://ows.mundialis.de/services/service?', {
        layers: 'TOPO-WMS,OSM-Overlay-WMS'
})
};
var overlayMaps = {
     "Stress Hydrique au Maroc": geojsonSH,
     "Risque de secheresse au Maroc" : geojsonRS,
     "Risque d inondation au Maroc" : geojsonRI,
     "Sensibilite a la desertification": geojsonZD,
     "Pluviometrie" : geojsonP,
     "Emission du CO2": geojsonEmissionC02,
    };
L.control.layers(basemaps, overlayMaps,{collapsed: false}).addTo(map);
basemaps.Esri_WorldGrayCanvas.addTo(map);

// LES LEGENDES
//              LEGENDE ZD
var legendZD = L.control({position: 'bottomright'});

    legendZD.onAdd = function () {

    var div = L.DomUtil.create('div', 'infoZD legendZD'),
        grades = [1,2,3,4,5,6,7,8,9];
    div.innerHTML += '<h6>Legende :</h6>';
    for (var i = 0; i < (grades.length-1); i++) {
        div.innerHTML +=
            '<div style="background-color :' + getColorZD(grades[i]) + '"></i> ' +
            grades[i] + (grades[i+1] ? ' zone  <br>':' zone');
    }
    return div;
};
//              LEGENDE SH
var legendSH = L.control({position: 'bottomright'});

    legendSH.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'infoSH legendSH'),
        grades = [0,1,2,3,4,5];

    div.innerHTML += '<h6>Legende :</h6>';
    for (var i = 0; i < (grades.length-1); i++) {
        div.innerHTML +=
            '<div style="background-color :' + getColorSH(grades[i+1]) + '"></i> ' +
            grades[i] + (grades[i + 1] ? ' _ ' + grades[i + 1] + ' <br>' :' ');
    }    

    return div;
};
//              LEGENDE RS
var legendRS = L.control({position: 'bottomright'});

    legendRS.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'infoSH legendSH'),
        grades = [0,0.2,0.4,0.6,0.8,1];

    div.innerHTML += '<h6>Legende :</h6>';
    for (var i = 0; i < (grades.length-1); i++) {
        div.innerHTML +=
            '<div style="background-color :' + getColorRS(grades[i+1]) + '"></i> ' +
            grades[i] + (grades[i + 1] ? ' _ ' + grades[i + 1] + ' <br>' :'+');
    }    

    return div;
};
//              LEGENDE RI
var legendRI = L.control({position: 'bottomright'});

    legendRI.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'infoRI legendRI'),
        grades = [0,1,2,3,4,5];

    div.innerHTML += '<h6>Legende :</h6>';
    for (var i = 0; i < (grades.length-1); i++) {
        div.innerHTML +=
            '<div style="background-color :' + getColorRI(grades[i+1]) + '"></i> ' +
            grades[i] + (grades[i + 1] ? ' _ ' + grades[i + 1] + ' <br>' :' ');
    }    

    return div;
};
//              LEGENDE P
var legendP = L.control({position: 'bottomright'});

    legendP.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'infoP legendP'),
        grades = [100,250,400,500];

    div.innerHTML += '<h6>Legende :</h6>';
    for (var i = 0; i < (grades.length-1); i++) {
        div.innerHTML +=
            '<div style="background-color :' + getColorP(grades[i+1]) + '"></i> ' +
            grades[i] + (grades[i + 1] ? ' _ ' + grades[i + 1] + ' <br>' :' ');
    }    

    return div;
};
// CONDITIONS SUR LES LEGENDES 

map.on('overlayadd', function (eventLayer) {
    if (eventLayer.name === 'Sensibilite a la desertification') {
        this.removeControl(legendSH);
        this.removeControl(legendRS);
        this.removeControl(legendRI);
        this.removeControl(legendP);
        legendZD.addTo(this);
    } else if (eventLayer.name === 'Stress Hydrique au Maroc'){
        this.removeControl(legendZD);
        this.removeControl(legendRS);
        this.removeControl(legendRI);
        this.removeControl(legendP);
        legendSH.addTo(this);
    } else if (eventLayer.name === 'Risque de secheresse au Maroc'){
        this.removeControl(legendZD);
        this.removeControl(legendSH);
        this.removeControl(legendRI);
        this.removeControl(legendP);
        legendRS.addTo(this);
    } else if (eventLayer.name === 'Pluviometrie au Maroc'){
        this.removeControl(legendZD);
        this.removeControl(legendSH);
        this.removeControl(legendRI);
        this.removeControl(legendRS);
        legendP.addTo(this);
    }else {
        this.removeControl(legendZD);
        this.removeControl(legendSH);
        this.removeControl(legendRS);
        this.removeControl(legendP);
        legendRI.addTo(this); 
}});
</script>
</body>
</html>
