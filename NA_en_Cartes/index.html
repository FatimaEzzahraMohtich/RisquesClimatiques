<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Risques Climatiques Au Maroc et Au Nord d'Afrique</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

  <link rel="stylesheet" href="leaflet.css" />
	<script src="leaflet.js"></script>

  <!-- Map Style-->
	<style>
    #map {
      width: 100%;
      height: 750px;
    }
    .infoII {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255,255,255,0.9);
        box-shadow: 0 0 15px rgba(0,0,0,0.5);
        border-radius: 5px;
    }
    .infoII h6 {
        margin: 0 0 5px;
        color: #000;
    }
    .infoIC {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255,255,255,0.9);
        box-shadow: 0 0 15px rgba(0,0,0,0.5);
        border-radius: 5px;
    }
    .infoIC h6 {
        margin: 0 0 5px;
        color: #000;
    }
    .infoIS {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255,255,255,0.9);
        box-shadow: 0 0 15px rgba(0,0,0,0.5);
        border-radius: 5px;
    }
    .infoIS h6 {
        margin: 0 0 5px;
        color: #000;
    }
    .infoID {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255,255,255,0.9);
        box-shadow: 0 0 15px rgba(0,0,0,0.5);
        border-radius: 5px;
    }
    .infoID h6 {
        margin: 0 0 5px;
        color: #000;
    }
        .infoFF {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            border-radius: 5px;
        }
        .infoFF h6 {
            margin: 0 0 5px;
            color: #000;
        }
        .infoIA {
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            border-radius: 5px;
        }
        .infoIA h6 {
            margin: 0 0 5px;
            color: #000;
        }
    .legendII {
            line-height: 18px;
            color: #000;
        }
    
        .legendII i {
          width: 18px;
          height: 18px;
          float: left;
          margin-right: 8px;
          opacity: 0.7;
        }
        .legendIC {
            line-height: 18px;
            color: #000;
        }
    
        .legendIC i {
          width: 18px;
          height: 18px;
          float: left;
          margin-right: 8px;
          opacity: 0.7;
        }
  </style>  

</head>
<body>
<!-- partial:index.partial.html -->
<div class="overlay-navigation">
  <nav role="navigation">
    <ul>
      <li><a href="../index.html" data-content="The beginning">Home</a></li>
      <li><a href="../Maroc_en_Cartes/index.html" data-content="Curious?">Maroc<br>en Cartes</a></li>
      <li><a href="../Maroc_en_3D/index.html" data-content="I got game">Maroc<br>en 3D</a></li>
      <li><a href="../NA_en_Cartes/index.html" data-content="Curious?">NA en Cartes</a></li>
      <li><a href="../NA_en_Cartes_Dynam/index.html" data-content="Curious?">NA en Cartes<br>Dynamiques</a></li>
      <li><a href="../NA_en_Graphes/index.html" data-content="I got game">NA en Graphes</a></li>
      <li><a href="../A_Propos/index.html" data-content="Only the finest">NA en Graphes</a></li>
      <li><a href="../Contact/index.html" data-content="Don't hesitate">Contact</a></li>
    </ul>
  </nav>
</div>

<section class="home">
  <!-- add text or link in the menu bar
  <a href="https://codepen.io/fluxus/pen/gPWvZm" target="_blank">Click for a slightly nicer Velocity.js version</a>
  -->
  <div class="open-overlay">
    <span class="bar-top"></span>
    <span class="bar-middle"></span>
    <span class="bar-bottom"></span>
  </div>
</section>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script  src="./script.js"></script>

  <!-- Code for the map -->
  <!-- HTML -->
  <div id='map'>
    <div class="app-content">
      <h1>
        Carte des risques climatiques au nord d'afrique
      </h1>
    </div>
  </div>

  <!-- GeoJson -->
  <script src="js/Control.MiniMap.js"></script>
<link rel="stylesheet" href="lib/opacity/Control.Opacity.css" />
<script src="lib/jquery/jquery-1.9.1.js"></script>
<script src="lib/jquery/jquery-ui-1.10.3.custom.min.js"></script>
<link rel="stylesheet" href="lib/jquery/jquery-ui-1.10.3.custom.min.css" />
<script src="Climat_NA.geojson" type="text/javascript"></script>
<script src="Centroide_NA.geojson" type="text/javascript"></script>
  <!-- JavaScript -->
  <!-- We can add this script to a separate file and inculde src link -->
  <script type="text/javascript">

    var googlesatellite  = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{subdomains:['mt0','mt1','mt2','mt3'],iconURL: '//stamen-tiles-a.a.ssl.fastly.net/toner/4/2/5.png'
    }); 
  var map = L.map('map').setView([30.25, 9.69], 5);
     L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution : 'Â©MOHTICH Fatima-Ezzahra @Salimi Mahassine'}).addTo(map);
  
  // get color depending on indice d'inondation
  function getColorII(d) {
    return d > 3.350 ? '#43a2ca' :
           d > 2.640 ? '#a8ddb5' :
           d > 1.929 ? '#e0f3db' :
                                '#ffffff';
  }
  function MonstyleII(feature) {
    return {
      weight: 2,
      opacity: 1,
      color: 'black',
      dashArray: '3',
      fillOpacity: 0.9,
      fillColor: getColorII(feature.properties.Risque_ino)
    };
  }
    // get color depending on indice de incendie
  function getColorIC(d) {
    return d > 1.63 ? '#e31a1c' :
           d > 0.65 ? '#fc4e2a' :
           d > 0.07 ? '#fd8d3c' :
                                     '#ffffff';
  }

  function MonstyleIC(feature) {
    return {
      weight: 2,
      opacity: 1,
      color: 'lightblue',
      dashArray: '3',
      fillOpacity: 0.9,
      fillColor: getColorIC(feature.properties.Indice_inc)
    };
  }
    // carte a symboles proportionnelles des superficies attaquees par les feux de foret
    var sym = L.geoJson(Centroide_NA, {
        style: MonstyleFF,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.Sup_Incendie))
            });
        },
    });
    
    function MonstyleFF(feature) {
        return {
            weight: 3,
            opacity: 1,
            color: 'lightblue',
            dashArray: '3',
            fillOpacity: 0.2,
        };
    }
    function MonstyleSymbFF(feature) {
        return {
            weight: 5,
            opacity: 1,
            color: '#f03b20',
            dashArray: '3',
            fillOpacity: 1,
        };
    }
    function calcRadius(val) {
        var radius = Math.sqrt(val)*(100/Math.sqrt(15719));
            return radius;}
    // carte a symboles proportionnelles des superficies desertifiees
    var sym = L.geoJson(Centroide_NA, {
        style: MonstyleID,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.Desertification))
            });
        },
    });
    
    function MonstyleID(feature) {
        return {
            weight: 3,
            opacity: 1,
            color: 'lightblue',
            dashArray: '3',
            fillOpacity: 0.2,
        };
    }
    function MonstyleSymbID(feature) {
        return {
            weight: 5,
            opacity: 1,
            color: '#31a354',
            dashArray: '3',
            fillOpacity: 1,
        };
    }
    function calcRadius(val) {
        var radius = Math.sqrt(val)*(30/Math.sqrt(751000));
            return radius;}
    // carte a symboles proportionnelles des superficies qui soufferent de la secheresse
    var sym = L.geoJson(Centroide_NA, {
        style: MonstyleIS,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.secheresse))
            });
        },
    });

    function MonstyleIS(feature) {
        return {
            weight: 2,
            opacity: 1,
            color: 'lightblue',
            dashArray: '3',
            fillOpacity: 0.2,
        };
    }
    function MonstyleSymbIS(feature) {
        return {
            weight: 5,
            opacity: 1,
            color: '#fec44f',
            dashArray: '3',
            fillOpacity: 1,
        };
    }
    function calcRadius(val) {
        var radius = Math.sqrt(val)*(50/Math.sqrt(277235));
            return radius;       
    }
    // carte a symboles proportionnelles des superficies arides
    var sym = L.geoJson(Centroide_NA, {
        style: MonstyleIA,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.Aridite))
            });
        },
    });

    function MonstyleIA(feature) {
        return {
            weight: 3,
            opacity: 1,
            color: 'lightblue',
            dashArray: '3',
            fillOpacity: 0.2,
        };
    }
    function MonstyleSymbIA(feature) {
        return {
            weight: 5,
            opacity: 1,
            color: '#41b6c4',
            dashArray: '3',
            fillOpacity: 1,
        };
    }
    function calcRadius(val) {
        var radius = Math.sqrt(val)*(40/Math.sqrt(2611388));;
            return radius;       
    }
  function highlightFeatureII(e) {
      var layerII = e.target;

      layerII.setStyle({
          weight: 2,
          color: '#c6dbef',
          dashArray: '',
          fillOpacity: 0.2
      });

      if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
          layerII.bringToFront();
      }
          infoII.update(layerII.feature.properties);

  }
    function highlightFeatureIC(e) {
      var layerIC = e.target;

      layerIC.setStyle({
          weight: 2,
          color: '#fdae6b',
          dashArray: '',
          fillOpacity: 0.2
      });

      if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
          layerIC.bringToFront();
      }
          infoIC.update(layerIC.feature.properties);

  }
   function highlightFeatureIS(e) {
      var layerIS = e.target;

      layerIS.setStyle({
          weight: 2,
          color: '#666',
          dashArray: '',
          fillOpacity: 0.2
      });

      if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
          layerIS.bringToFront();
      }
          infoIS.update(layerIS.feature.properties);

  }
  function highlightFeatureID(e) {
      var layerID = e.target;

      layerID.setStyle({
          weight: 2,
          color: '#d9f0a3',
          dashArray: '',
          fillOpacity: 0.2
      });

      if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
          layerID.bringToFront();
      }
          infoID.update(layerID.feature.properties);

  }
    function highlightFeatureIA(e) {
        var layerIA = e.target;

        layerIA.setStyle({
            weight: 2,
            color: '#f0f9e8',
            dashArray: '',
            fillOpacity: 0.2
        });

        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
            layerIA.bringToFront();
        }
            infoIA.update(layerIA.feature.properties);

    }
    function highlightFeatureFF(e) {
        var layerFF = e.target;

        layerFF.setStyle({
            weight: 2,
            color: '#d9f0a3',
            dashArray: '',
            fillOpacity: 0.2
        });
        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
            layerFF.bringToFront();
        }
            infoFF.update(layerFF.feature.properties);

    }


  function resetHighlightII(e) {
      geojsonII.resetStyle(e.target);
          infoII.update();

  }
    function resetHighlightIC(e) {
      geojsonIC.resetStyle(e.target);
          infoIC.update();

  }
  function resetHighlightIS(e) {
      geojsonIS.resetStyle(e.target);
          infoIS.update();

  }
  function resetHighlightID(e) {
      geojsonID.resetStyle(e.target);
          infoID.update();
  }
    function resetHighlightIA(e) {
        geojsonIA.resetStyle(e.target);
            infoIA.update();
    }
    function resetHighlightFF(e) {
        geojsonFF.resetStyle(e.target);
            infoFF.update();
    }

  function zoomToFeatureII(e) {
    map.fitBounds(e.target.getBounds());
}
  function zoomToFeatureIC(e) {
    map.fitBounds(e.target.getBounds());
}
    function zoomToFeatureIS(e) {
    map.fitBounds(e.target.getBounds());
}
    function zoomToFeatureID(e) {
    map.fitBounds(e.target.getBounds());
}
    function zoomToFeatureIA(e) {
    map.fitBounds(e.target.getBounds());
}
    function zoomToFeatureFF(e) {
    map.fitBounds(e.target.getBounds());
}

  function onEachFeatureII(feature, layerII) {
    layerII.on({
        mouseover: highlightFeatureII,
        mouseout: resetHighlightII,
        click: zoomToFeatureII
    });
  }  
    function onEachFeatureIC(feature,layerIC) {
    layerIC.on({
        mouseover: highlightFeatureIC,
        mouseout: resetHighlightIC,
        click: zoomToFeatureIC
    });
}
    function onEachFeatureIS(feature,layerIS) {
    layerIS.on({
        mouseover: highlightFeatureIS,
        mouseout: resetHighlightIS,
        click: zoomToFeatureIS
    });
}
    function onEachFeatureID(feature,layerID) {
    layerID.on({
        mouseover: highlightFeatureID,
        mouseout: resetHighlightID,
        click: zoomToFeatureID
    });
}
    function onEachFeatureIA(feature,layerIA) {
    layerIA.on({
        mouseover: highlightFeatureIA,
        mouseout: resetHighlightIA,
        click: zoomToFeatureIA
    });
}
    function onEachFeatureFF(feature,layerFF) {
    layerFF.on({
        mouseover: highlightFeatureFF,
        mouseout: resetHighlightFF,
        click: zoomToFeatureFF
    });
}

var infoII = L.control();
var infoIC = L.control();
var infoIS = L.control();
var infoID = L.control();
var infoIA = L.control();
var infoFF = L.control();

infoII.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoII'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoIC.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoIC'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoIS.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoIS'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoID.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoID'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoIA.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoIA'); // create a div with a class "info"
    this.update();
    return this._div;
};
infoFF.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'infoFF'); // create a div with a class "info"
    this.update();
    return this._div;
};

// method that we will use to update the control based on feature properties passed
infoII.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation du risque d inondation aux pays du Nord d Afrique :</h4>' +  (props ?
        'Pays: <b>' + props.Pays + '</b> <br />Indice du risque d inondation : '+ props.Risque_ino 
        : ' Merci de mettre le curseur sur la pays qui vous interesse');
};

infoIC.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation du risque d incendie aux pays du Nord d Afrique :</h4>' +  (props ?
      'pays : <b>' + props.Pays + '</b> <br />Indice d incendie : '+ props.Indice_inc + '  ' + '</sup>'
        : ' Merci de mettre le curseur sur un pays.');
};

infoIS.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation du risque de secheresse aux pays du Nord d Afrique :</h4>' +  (props ?
      'pays : <b>' + props.Pays + '</b> <br />Indice de secheresse : '+ props.Sechresse + '  ' + '</sup>'
        : ' Merci de mettre le curseur sur un pays.');
};
infoID.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation du risque de desertification aux pays du Nord d Afrique :</h4>' +  (props ?
        'pays : <b>' + props.Pays + '</b> <br />Superficie des zones desetifiees en hectars : '+ props.Desertification+ '</b> <br />due a l erosion de l eau: ' + props.Erosion_ea + '</b> <br/>due a l erosion du vent: ' + props.Erosion_ve + '</b> <br />due a d autre type d erosion : ' + props.Erosion_au + '  ' + '</sup>'
        : ' Merci de mettre le curseur sur un pays.');
};
infoIA.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation du risque d aridite aux pays du Nord d Afrique :</h4>' +  (props ?
        'pays : <b>' + props.Pays + '</b> <br />Superficie des zones arides en hectars : ' + props.Aridite + '  ' + '</sup>'
        : ' Merci de mettre le curseur sur un pays.');
};
infoFF.update = function (props) {
    this._div.innerHTML = '<h4>Visualisation de des superficies attaquees par les feux de forets aux pays du Nord d Afrique :</h4>' +  (props ?
        'pays : <b>' + props.Pays + '</b> <br />Superficie des forets brulees: '+ props.Superfice_ + '  ' + '</sup>'
        : ' Merci de mettre le curseur sur un pays.');
};

map.on('overlayadd', function (eventLayer) {
    if (eventLayer.name === 'Risque d inondation aux pays du Nord d Afrique') {
        this.removeControl(infoIC);
        this.removeControl(infoIS);
        this.removeControl(infoID);
        this.removeControl(infoFF);
        this.removeControl(infoIA);
        infoII.addTo(this);
    } else if (eventLayer.name === 'Risque d incendie aux pays du Nord d Afrique'){
        this.removeControl(infoII);
        this.removeControl(infoIS);
        this.removeControl(infoID);
        this.removeControl(infoFF);
        this.removeControl(infoIA);
        infoIC.addTo(this);
    } else if (eventLayer.name === 'Risque de secheresse aux pays d Afrique du Nord'){
        this.removeControl(infoII);
        this.removeControl(infoIC);
        this.removeControl(infoID);
        this.removeControl(infoFF);
        this.removeControl(infoIA);
        infoIS.addTo(this);
    } else if (eventLayer.name === 'Risque de desertification aux pays d Afrique du Nord'){
        this.removeControl(infoII);
        this.removeControl(infoIC);
        this.removeControl(infoIS);
        this.removeControl(infoFF);
        this.removeControl(infoIA);
        infoID.addTo(this);
    } else if (eventLayer.name === 'Risque d aridite aux pays d Afrique du Nord'){
        this.removeControl(infoII);
        this.removeControl(infoIC);
        this.removeControl(infoIS);
        this.removeControl(infoFF);
        this.removeControl(infoID);
        infoIA.addTo(this);
    } else  {
        this.removeControl(infoII);
        this.removeControl(infoIC);
        this.removeControl(infoIS);
        this.removeControl(infoID);
        this.removeControl(infoIA);
        infoFF.addTo(this); 
    }});

// DECLARATION DES LAYEIS */
  var geojsonII = L.geoJson(Climat_NA, {
    style: MonstyleII,
      onEachFeature: onEachFeatureII,
});

  var geojsonIC = L.geoJson(Climat_NA, {
    style: MonstyleIC,
      onEachFeature: onEachFeatureIC,
});
    var geojsonIS = L.geoJson(Climat_NA, {
    style: MonstyleIS,
      onEachFeature: onEachFeatureIS,
});
    var geojsonID = L.geoJson(Climat_NA, {
    style: MonstyleID,
      onEachFeature: onEachFeatureID,
});
    var geojsonIA = L.geoJson(Climat_NA, {
    style: MonstyleIA,
      onEachFeature: onEachFeatureIA,
});
    var geojsonFF = L.geoJson(Climat_NA, {
        style: MonstyleFF,
        onEachFeature: onEachFeatureFF,
});
    // carte a symboles proportionnelles des feux de forets
    var sym = L.geoJson(Centroide_NA, {

        style: MonstyleSymbFF,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.Sup_Incendie))
            });
        },
    });
    var geojsonFF = L.layerGroup([geojsonFF,sym.bringToFront()]);
    // carte a symboles proportionnelles des superficies qui soufferent de la secheresse
    var sym = L.geoJson(Centroide_NA, {

        style: MonstyleSymbIS,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.Sechresse))
            });
        },
    });
    var geojsonIS = L.layerGroup([geojsonIS,sym.bringToFront()]);
        // carte a symboles proportionnelles des superficies desertifiees
    var sym = L.geoJson(Centroide_NA, {

        style: MonstyleSymbID,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.Desertification))
            });
        },
    });
    var geojsonID = L.layerGroup([geojsonID,sym.bringToFront()]);
    // carte a symboles proportionnelles des superficies arides
    var sym = L.geoJson(Centroide_NA, {

        style: MonstyleSymbIA,
        pointToLayer: function(feature, ll) {
            return L.circleMarker(ll, {
            radius: calcRadius(Number(feature.properties.Aridite))
            });
        },
    });
    var geojsonIA = L.layerGroup([geojsonIA,sym.bringToFront()]);

var graphicScale = L.control.graphicScale({fill:'fill',doubleLine:true}).addTo(map);

var basemaps = {
    Esri_WorldGrayCanvas: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ',
    maxZoom: 16
    }),

    OpenStreetMapDE:L.tileLayer.wms('https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {
  maxZoom: 18,
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributoIS'
}),
    EsriWorldImagery: L.tileLayer.wms('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
}),

    TOPO_WMS: L.tileLayer.wms('http://ows.mundialis.de/services/service?', {
        layeIS: 'TOPO-WMS,OSM-Overlay-WMS'
})
};
var overlayMaps = {
     "Risque d incendie aux pays du Nord d Afrique": geojsonIC,
     "Risque de secheresse aux pays d Afrique du Nord" : geojsonIS,
     "Risque de desertification aux pays d Afrique du Nord" : geojsonID,
     "Risque d inondation aux pays du Nord d Afrique": geojsonII,
     "Risque d aridite aux pays d Afrique du Nord" : geojsonIA,
     "Feux de forets aux pays du Nord d Afrique": geojsonFF,
    };
L.control.layers(basemaps, overlayMaps,{collapsed: false}).addTo(map);
basemaps.Esri_WorldGrayCanvas.addTo(map);

// LES LEGENDES
//              LEGENDE II
var legendII = L.control({position: 'bottomright'});

    legendII.onAdd = function () {

    var div = L.DomUtil.create('div', 'infoII legendII'),
        grades = [4.2,3.350,2.640,1.929];
    div.innerHTML += '<h6>Legende :</h6>';
    for (var i = 0; i < (grades.length-1); i++) {
        div.innerHTML +=
            '<div style="background-color :' + getColorII(grades[i]) + '"></i> ' +
            grades[i] + (grades[i+1] ? ' _ ' + grades[i + 1] + ' <br>' :'+');
    }
    return div;
};
//              LEGENDE IC
var legendIC = L.control({position: 'bottomright'});

    legendIC.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'infoIC legendIC'),
        grades = [3,1.63,0.65, 0.07 ];
    div.innerHTML += '<h6>Legende :</h6>';
    for (var i = 0; i < (grades.length-1); i++) {
        div.innerHTML +=
            '<div style="background-color :' + getColorIC(grades[i]) + '"></i> ' +
            grades[i] + (grades[i + 1] ? ' _ ' + grades[i + 1] + ' <br>' :' ');
    }    

    return div;
};
// CONDITIONS SUR LES LEGENDES 

map.on('overlayadd', function (eventLayer) {
    if (eventLayer.name === 'Risque d inondation aux pays du Nord d Afrique') {
        this.removeControl(legendIC);
        legendII.addTo(this);
    } else {
        this.removeControl(legendII);
        legendIC.addTo(this);
   
}});
//*******************************************************************Mini Map***********************************///
                                var miniMap = new L.Control.MiniMap(googlesatellite, {
                                    toggleDisplay: true
                                }).addTo(map);

                                miniMap.on("toggle", function(data) {
                                    console.log("Listen for `toggle` event: miniMap is " + (data.minimized ? "minimize" : "restore"));
                                });
                                miniMap.on("minimize", function() {
                                    console.log("Listen for `minimize` event");
                                });
                                miniMap.on("restore", function() {
                                    console.log("Listen for `restore` event");
                                });

                                var actionButton = new(L.Control.extend({
                                    options: {
                                        position: 'topleft',
                                        html: "#",
                                        toggleClass: "toggle",
                                        status: false,
                                        listeners: []
                                    },
                                    initialize: function(options) {
                                        L.setOptions(this, options);
                                        this._status = this.options.status;
                                    },

                                    onAdd: function() {
                                        var container = L.DomUtil.create('div', 'leaflet-control-actionbtn leaflet-bar leaflet-control');
                                        var link = this._link = L.DomUtil.create('a', '', container);
                                        link.href = '#';
                                        link.innerHTML = this.options.html;
                                        link.title = this.options.title || this.options.html;
                                        L.DomEvent.on(link, 'click', this._onBtnClick, this);
                                        if (this.options.status) {
                                            this._toggle();
                                        }
                                        this._addListeners();
                                        return container;
                                    },

                                    toggle: function() {
                                        this._toggle();
                                        if (this.options.action) {
                                            this._removeListeners();
                                            this._forListeners(null, function(listener) {
                                                listener[0].once(listener[1], this._addListeners, this);
                                            });
                                            this.options.action.call(this, this._status);
                                        }
                                    },

                                    _toggle: function() {
                                        this._status = !this._status;
                                        if (!this._status) {
                                            L.DomUtil.addClass(this._link, this.options.toggleClass);
                                        } else {
                                            L.DomUtil.removeClass(this._link, this.options.toggleClass);
                                        }
                                    },

                                    _addListeners: function() {
                                        this._forListeners();
                                    },

                                    _removeListeners: function() {
                                        this._forListeners(true);
                                    },

                                    _forListeners: function(off, func) {
                                        if (this.options.listeners.length) {
                                            for (var fry = 0; fry < this.options.listeners.length; fry++) {
                                                var listener = this.options.listeners[fry];
                                                var action = listener[0] && listener[0][off ? "off" : "on"];
                                                if (action && typeof listener[1] === 'string') {
                                                    if (func) {
                                                        func.call(this, listener);
                                                    } else {
                                                        action.call(listener[0], listener[1], this._toggle, this);
                                                    }
                                                }
                                            }
                                        }
                                    },

                                    _onBtnClick: function(e) {
                                        L.DomEvent.stop(e);
                                        this.toggle();
                                    }
                                }))({
                                    action: function() {
                                        miniMap._toggleDisplayButtonClicked();
                                    },
                                    status: !miniMap._minimized,
                                    html: "MM",
                                    listeners: [
                                        [miniMap, "toggle"]
                                    ]
                                });
                                actionButton.addTo(map);
////////////////////////////////**///////////////////////////////////////////////////////////////////////////////////////////////

</script>
</body>
</html>